import json
import os

import requests
import pandas as pd
from dotenv import load_dotenv

# PRINT GENRE LIST FOR USER TO SEE

genre_list = ["comedy","horror","action","romantic comedy"]
print("Please choose one of the following genres " + str(genre_list))

# NEED TO IMPORT THE API KEYS FOR TMDB AND ROTTEN TOMATOES


# CREATE USER INPUT FOR GENRE AND YEAR OF MOVIE

number_of_movies = 100000



while True:
    genre_input = input("Enter the name of the genre you want: ")
    if genre_input.lower() in genre_list:

      for collection in range(number_of_movies):
        data = requests.get("https://api.themoviedb.org/3/movie/" + str(collection) + "?api_key=859ad25d111a2a5246f618512a63e567")

        if data.status_code == 200:
          json_string = data.text
          obj = json.loads(json_string)

          for ele in obj['genres']:
            if genre_input == ele['name'].lower():
              print(obj['name'])
                
            # GOT SOME HELP FROM A FRIEND WITH THIS CODE 
    else:
	    print("Please make sure to enter a valid genre")

	    if "Error" in data.text:
		    print("The stock you are looking for is not here")
	    else:
		    break

    # GOT SOME OF THIS CODE FROM THE ROBO ADVISOR PROJECT

# PULL DATA FROM TMDB AND ROTTEN TOMATOES W MATCHING GENRE/YEAR



# OUTPUT THREE RECOM
